# ðŸ› ï¸ ê¸°ìˆ  íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë¡œê·¸ (Troubleshooting Log)

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ êµ¬ì¶• ë° ë°°í¬ ê³¼ì •ì—ì„œ ë°œìƒí•œ ê¸°ìˆ ì  ë¬¸ì œì™€ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì‹œë„ ë° ìµœì¢… í•´ê²° ë°©ì•ˆì„ ê¸°ë¡í•œ ë¬¸ì„œìž…ë‹ˆë‹¤.

## ðŸ“Œ ëª©ì°¨
### Part 1. ðŸš€ CI/CD ë° ì¸í”„ë¼ (Deployment & Infra)
> GitHub Actions, EC2, Docker ë°°í¬ ê³¼ì •ì—ì„œ ë°œìƒí•œ ì´ìŠˆ
1. [GitHub Actions YAML ë¬¸ë²• ì—ëŸ¬ (ë“¤ì—¬ì“°ê¸°)](#1-github-actions-yaml-ë¬¸ë²•-ì—ëŸ¬-ë“¤ì—¬ì“°ê¸°)
2. [EC2 ë°°í¬ ì‹œ Docker Compose ì„¤ì • íŒŒì¼ ëˆ„ë½](#2-ec2-ë°°í¬-ì‹œ-docker-compose-ì„¤ì •-íŒŒì¼-ëˆ„ë½)
3. [Private Repository ì´ë¯¸ì§€ Pull ê¶Œí•œ ê±°ë¶€](#3-private-repository-ì´ë¯¸ì§€-pull-ê¶Œí•œ-ê±°ë¶€)
4. [ì €ì‚¬ì–‘ EC2 ì¸ìŠ¤í„´ìŠ¤ ë°°í¬ íƒ€ìž„ì•„ì›ƒ ë° ì„œë²„ í”„ë¦¬ì§•](#4-ì €ì‚¬ì–‘-ec2-ì¸ìŠ¤í„´ìŠ¤-ë°°í¬-íƒ€ìž„ì•„ì›ƒ-ë°-ì„œë²„-í”„ë¦¬ì§•)
5. [ë°°í¬ í™˜ê²½ì—ì„œì˜ í™˜ê²½ ë³€ìˆ˜(.env) ë™ì  ê´€ë¦¬](#5-ë°°í¬-í™˜ê²½ì—ì„œì˜-í™˜ê²½-ë³€ìˆ˜env-ë™ì -ê´€ë¦¬)

### Part 2. ðŸ”Œ ì™¸ë¶€ API ì—°ë™ (External APIs)
> ì§€ë„(SGIS), ê²°ì œ, ì†Œì…œ ë¡œê·¸ì¸ ë“± ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ ì´ìŠˆ
6. [SGIS API 302 Redirect ë° JSON íŒŒì‹± ì—ëŸ¬](#6-sgis-api-302-redirect-ë°-json-íŒŒì‹±-ì—ëŸ¬)

### Part 3. ðŸ›¡ï¸ ë³´ì•ˆ ë° ë„¤íŠ¸ì›Œí¬ (Security & Network)
> CORS, ì¸ì¦/ì¸ê°€, ì¿ í‚¤ ì„¸ì…˜ ì²˜ë¦¬ ì´ìŠˆ
7. [ë¡œì»¬ í™˜ê²½ CORS ì¸ì¦ ì—ëŸ¬ (500 NPE & Credentials)](#7-ë¡œì»¬-í™˜ê²½-cors-ì¸ì¦-ì—ëŸ¬-500-npe--credentials)
8. [í”„ë¡ íŠ¸ì—”ë“œ ìš”ì²­ ë¬¸ë²• ì˜¤ë¥˜ë¡œ ì¸í•œ 403 Forbidden](#8-í”„ë¡ íŠ¸ì—”ë“œ-ìš”ì²­-ë¬¸ë²•-ì˜¤ë¥˜ë¡œ-ì¸í•œ-403-forbidden)
9. [Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ í™˜ê²½ì—ì„œ ì†Œì…œ ë¡œê·¸ì¸ ì—°ë™ ì´ìŠˆ](#9íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-nginx-ë¦¬ë²„ìŠ¤-í”„ë¡ì‹œ-í™˜ê²½ì—ì„œ-ì†Œì…œ-ë¡œê·¸ì¸-ì—°ë™-ì´ìŠˆ)
---
---

## 1. GitHub Actions YAML ë¬¸ë²• ì—ëŸ¬ (ë“¤ì—¬ì“°ê¸°)

### ðŸ” ë¬¸ì œ ìƒí™©
- GitHub Actions ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ `Invalid workflow file` ì—ëŸ¬ì™€ í•¨ê»˜ íŠ¹ì • ë¼ì¸ì—ì„œ ë¬¸ë²• ì˜¤ë¥˜ ë°œìƒ.

### ðŸ§ ì›ì¸ ë¶„ì„
- YAML íŒŒì¼ì€ ë“¤ì—¬ì“°ê¸°(Indentation)ì— ë§¤ìš° ì—„ê²©í•œ êµ¬ì¡°ë¥¼ ê°€ì§.
- `script: |` ë¸”ë¡ í•˜ìœ„ì˜ ì…¸ ëª…ë ¹ì–´ë“¤ì´ ìƒìœ„ ê³„ì¸µì¸ `script`ì™€ ë™ì¼í•œ ë ˆë²¨ì— ìœ„ì¹˜í•˜ì—¬ ë¬¸ë²•ì ìœ¼ë¡œ ì˜¬ë°”ë¥´ì§€ ì•Šì€ êµ¬ì¡°ê°€ ë¨.

### âœ¨ í•´ê²° ë°©ë²•
- í•˜ìœ„ ëª…ë ¹ì–´ ë¸”ë¡ì— ìŠ¤íŽ˜ì´ìŠ¤ 2~4ì¹¸ì„ ì¶”ê°€í•˜ì—¬ ëª…í™•í•œ ê³„ì¸µ êµ¬ì¡°ë¥¼ í˜•ì„±í•¨ìœ¼ë¡œì¨ ë¬¸ë²• ì˜¤ë¥˜ í•´ê²°.

### ðŸ’¡ ë°°ìš´ ì 
- ìžë™í™” ìŠ¤í¬ë¦½íŠ¸ ìž‘ì„± ì‹œ YAML í˜•ì‹ì„ ì¤€ìˆ˜í•˜ëŠ” ê²ƒì´ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ ê¹¨ë‹¬ì•˜ìœ¼ë©°, IDEì˜ YAML ë¦°íŠ¸ ê¸°ëŠ¥ì„ í™œìš©í•˜ëŠ” ìŠµê´€ì„ ë“¤ìž„.

---

## 2. EC2 ë°°í¬ ì‹œ Docker Compose ì„¤ì • íŒŒì¼ ëˆ„ë½

### ðŸ” ë¬¸ì œ ìƒí™©
- EC2 ì„œë²„ì—ì„œ `docker-compose pull` ì‹¤í–‰ ì‹œ `no configuration file provided` ì—ëŸ¬ ë°œìƒí•˜ë©° ë°°í¬ ì¤‘ë‹¨.

### ðŸ§ ì›ì¸ ë¶„ì„
- GitHub Actionsê°€ ë„ì»¤ ì´ë¯¸ì§€ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì—…ë¡œë“œí•˜ì§€ë§Œ, ì´ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì„¤ê³„ë„ì¸ `docker-compose.yml` íŒŒì¼ì€ EC2 ì„œë²„ë¡œ ì „ì†¡í•˜ì§€ ì•Šì•˜ìŒ.

### âœ¨ í•´ê²° ë°©ë²•
- `appleboy/scp-action`ì„ ì›Œí¬í”Œë¡œìš°ì— ë„ìž…í•˜ì—¬ ë°°í¬ ì‹œì ì— í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ `docker-compose.yml`ì„ EC2ì˜ ë°°í¬ í´ë”ë¡œ ìžë™ ë³µì‚¬í•˜ë„ë¡ êµ¬ì„±.

### ðŸ’¡ ë°°ìš´ ì 
- ë„ì»¤ ì´ë¯¸ì§€ ë°°í¬ì™€ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜(ì„¤ì • íŒŒì¼) ë°°í¬ê°€ ë¶„ë¦¬ë˜ì–´ì•¼ í•¨ì„ ì´í•´í•˜ê³ , ì „ì²´ì ì¸ ë°°í¬ ìžë™í™” íë¦„ì„ ì™„ì„±í•¨.

---

## 3. Private Repository ì´ë¯¸ì§€ Pull ê¶Œí•œ ê±°ë¶€

### ðŸ” ë¬¸ì œ ìƒí™©
- EC2 ì„œë²„ì—ì„œ ìµœì‹  ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¤ëŠ” ê³¼ì •ì—ì„œ `Access Denied` ì—ëŸ¬ ë°œìƒ.

### ðŸ§ ì›ì¸ ë¶„ì„
- ë„ì»¤ í—ˆë¸Œ ì €ìž¥ì†Œë¥¼ ë³´ì•ˆì„ ìœ„í•´ **Private**ìœ¼ë¡œ ì„¤ì •í–ˆìœ¼ë‚˜, EC2 ì„œë²„ê°€ í•´ë‹¹ ì €ìž¥ì†Œì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì¸ì¦ ì •ë³´(Login)ê°€ ì—†ëŠ” ìƒíƒœì—ì„œ ìš”ì²­ì„ ë³´ëƒ„.

### âœ¨ í•´ê²° ë°©ë²•
- ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ìµœìƒë‹¨ì— `echo "$DOCKERHUB_TOKEN" | docker login ...` ë¡œì§ì„ ì¶”ê°€.
- ë³´ì•ˆì„ ìœ„í•´ ë¹„ë°€ë²ˆí˜¸ ëŒ€ì‹  Docker Hub Access Tokenì„ ë°œí–‰í•˜ê³  GitHub Secretsë¥¼ í†µí•´ ê´€ë¦¬í•˜ë„ë¡ êµ¬í˜„.

### ðŸ’¡ ë°°ìš´ ì 
- ë¹„ê³µê°œ ìžì‚°ì„ ë‹¤ë£° ë•Œì˜ ì¸ì¦ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì„ ìµí˜”ìœ¼ë©°, ë¯¼ê° ì •ë³´ë¥¼ GitHub Secretsë¡œ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë²•ì„ ìŠµë“í•¨.

---

## 4. ì €ì‚¬ì–‘ EC2 ì¸ìŠ¤í„´ìŠ¤ ë°°í¬ íƒ€ìž„ì•„ì›ƒ ë° ì„œë²„ í”„ë¦¬ì§•

### ðŸ” ë¬¸ì œ ìƒí™©
- ë°°í¬ ê³¼ì •ì´ 10ë¶„ì„ ì´ˆê³¼í•˜ë©° íƒ€ìž„ì•„ì›ƒ ë°œìƒ ë° EC2 ì„œë²„ê°€ ì‘ë‹µ ë¶ˆëŠ¥ ìƒíƒœ(Freezing)ê°€ ë¨.

### ðŸ§ ì›ì¸ ë¶„ì„
- ì‚¬ìš© ì¤‘ì¸ AWS `t2.micro` ì¸ìŠ¤í„´ìŠ¤ì˜ RAM(1GB) ì‚¬ì–‘ í•œê³„ë¡œ ì¸í•´, ëŒ€ìš©ëŸ‰ ë„ì»¤ ì´ë¯¸ì§€ ì••ì¶• í•´ì œ ì‹œ CPUì™€ ë©”ëª¨ë¦¬ ì ìœ ìœ¨ì´ 100%ì— ë„ë‹¬í•¨.

### âœ¨ í•´ê²° ë°©ë²•
1.  **Swap Memory ì„¤ì •:** EBS ê³µê°„ì˜ ì¼ë¶€ë¥¼ ê°€ìƒ ë©”ëª¨ë¦¬(2GB)ë¡œ í• ë‹¹í•˜ì—¬ ë©”ëª¨ë¦¬ ë¶€ì¡± í˜„ìƒ ì™„í™”. (ë¹„ìš© ì¶”ê°€ ì—†ì´ ì„œë²„ ì•ˆì •ì„± í™•ë³´)
2.  **Timeout ì—°ìž¥:** `ssh-action`ì˜ `command_timeout` ì„¤ì •ì„ 30ë¶„ìœ¼ë¡œ ëŠ˜ë ¤ ì¼ì‹œì ì¸ ë¶€í•˜ ìƒí™©ì—ì„œë„ ë°°í¬ê°€ ëê¹Œì§€ ì§„í–‰ë˜ë„ë¡ ë³´ìž¥.

### ðŸ’¡ ë°°ìš´ ì 
- í´ë¼ìš°ë“œ ì¸í”„ë¼ì˜ ìžì› ì œì•½ ìƒí™©ì„ ì´í•´í•˜ê³ , ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œ ì„¤ì •ì„ í†µí•´ í•˜ë“œì›¨ì–´ í•œê³„ë¥¼ ê·¹ë³µí•˜ëŠ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê²½í—˜ì„ ìŒ“ìŒ.

---

## 5. ë°°í¬ í™˜ê²½ì—ì„œì˜ í™˜ê²½ ë³€ìˆ˜(.env) ë™ì  ê´€ë¦¬

### ðŸ” ë¬¸ì œ ìƒí™©
- ì»¨í…Œì´ë„ˆëŠ” ì •ìƒ ì‹¤í–‰ë˜ë‚˜ DB ì ‘ì† ì •ë³´ë‚˜ API Keyë¥¼ ì°¾ì§€ ëª»í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—ëŸ¬ ë°œìƒ.

### ðŸ§ ì›ì¸ ë¶„ì„
- ë³´ì•ˆìƒ `.env` íŒŒì¼ì„ ë¦¬í¬ì§€í† ë¦¬ì— ì˜¬ë¦¬ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, ë°°í¬ëœ EC2 ì„œë²„ ë‚´ë¶€ì—ëŠ” ì‹¤í–‰ì— í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŒ.

### âœ¨ í•´ê²° ë°©ë²•
- GitHub Secretsì— ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ë“±ë¡í•˜ê³ , ë°°í¬ ì‹œì ì— ì›Œí¬í”Œë¡œìš°ê°€ EC2 ë‚´ë¶€ì—ì„œ `touch .env` ë° `echo` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ `.env` íŒŒì¼ì„ ìƒì„±í•˜ë„ë¡ ìžë™í™”.

### ðŸ’¡ ë°°ìš´ ì 
- CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œ ë³´ì•ˆê³¼ ìš´ì˜ íŽ¸ì˜ì„±ì„ ë™ì‹œì— ìž¡ëŠ” í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ ì „ëžµì„ ìˆ˜ë¦½í•¨.

---

## 6. SGIS API 302 Redirect ë° JSON íŒŒì‹± ì—ëŸ¬
### ðŸ›‘ ë¬¸ì œ ìƒí™© (Problem)
- ë°±ì—”ë“œì—ì„œ SGIS í† í° ë°œê¸‰ ìš”ì²­ ì‹œ `com.fasterxml.jackson.core.JsonParseException` ë°œìƒ.
- ë¡œê·¸ ë¶„ì„ ê²°ê³¼, ì‘ë‹µ ë³¸ë¬¸ì´ JSONì´ ì•„ë‹Œ HTML(302 Found, Redirect)ë¡œ ë¦¬í„´ë¨.

### ðŸ” ì›ì¸ (Cause)
- SGIS APIì˜ ì„œë¹„ìŠ¤ ë„ë©”ì¸ì´ ë³€ê²½ë˜ì—ˆìŒ (`sgisapi.kostat.go.kr` â†’ `sgisapi.mods.go.kr`).
- ê¸°ì¡´ ì½”ë“œëŠ” êµ¬ ë„ë©”ì¸ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  ìžˆì—ˆê³ , ì„œë²„ê°€ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‘ë‹µì„ ì£¼ìž ìžë°”ê°€ ì´ë¥¼ JSONìœ¼ë¡œ íŒŒì‹±í•˜ë ¤ë‹¤ ì‹¤íŒ¨í•¨.

### ðŸ’¡ í•´ê²° (Solution)
- `application.properties` ë° `SgisService`ì˜ Base URLì„ ë³€ê²½ëœ ë„ë©”ì¸(`mods.go.kr`)ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ í•´ê²°.

---

## 7. ë¡œì»¬ í™˜ê²½ CORS ì¸ì¦ ì—ëŸ¬ (500 NPE & Credentials)
### ðŸ›‘ ë¬¸ì œ ìƒí™© (Problem)
- ë§¤ìž¥ ìƒì„± API í˜¸ì¶œ ì‹œ `500 Internal Server Error` ë°œìƒ.
- ë°±ì—”ë“œ ë¡œê·¸: `java.lang.NullPointerException: Cannot invoke "UserPrincipal.getUserId()" because "user" is null`.

### ðŸ” ì›ì¸ (Cause)
- ë¡œì»¬ ê°œë°œ í™˜ê²½(`localhost:3000` -> `localhost:8080`) ê°„ì˜ í†µì‹ ì—ì„œ ë¸Œë¼ìš°ì €ì˜ **Same-Site ì •ì±…**ìœ¼ë¡œ ì¸í•´ ì¿ í‚¤(ì¸ì¦ í† í°)ê°€ ì „ì†¡ë˜ì§€ ì•ŠìŒ.
- ë°±ì—”ë“œì˜ `JwtAuthenticationFilter`ê°€ í† í°ì„ ì°¾ì§€ ëª»í•´ ì‚¬ìš©ìžë¥¼ `Anonymous`ë¡œ ì²˜ë¦¬í–ˆê³ , ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ìœ ì € ì •ë³´ë¥¼ êº¼ë‚¼ ë•Œ NPE ë°œìƒ.

### ðŸ’¡ í•´ê²° (Solution)
- í”„ë¡ íŠ¸ì—”ë“œ `fetch` ì˜µì…˜ì— `credentials: 'include'`ë¥¼ ì¶”ê°€.
- ë¸Œë¼ìš°ì €ê°€ Cross-Origin ìš”ì²­(ë¡œì»¬ í¬íŠ¸ ì°¨ì´)ì—ì„œë„ ëª…ì‹œì ìœ¼ë¡œ ì¿ í‚¤ë¥¼ í¬í•¨í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ì„¤ì •.

---

## 8. í”„ë¡ íŠ¸ì—”ë“œ ìš”ì²­ ë¬¸ë²• ì˜¤ë¥˜ë¡œ ì¸í•œ 403 Forbidden
### ðŸ›‘ ë¬¸ì œ ìƒí™© (Problem)
- ë§¤ìž¥ ë“±ë¡ ë²„íŠ¼ í´ë¦­ ì‹œ `403 Forbidden` ì—ëŸ¬ ë°œìƒ.
- ë¸Œë¼ìš°ì € ì½˜ì†” ë¡œê·¸: `POST http://localhost:3000/.../${baseUrl}/...`

### ðŸ” ì›ì¸ (Cause)
- ìžë°”ìŠ¤í¬ë¦½íŠ¸ `fetch` í•¨ìˆ˜ ë‚´ì—ì„œ í…œí”Œë¦¿ ë¦¬í„°ëŸ´ ì‚¬ìš© ì‹œ ë°±í‹±(`` ` ``) ëŒ€ì‹  ìž‘ì€ë”°ì˜´í‘œ(`'`)ë¥¼ ì‚¬ìš©í•¨.
- `${baseUrl}` ë³€ìˆ˜ê°€ ì¹˜í™˜ë˜ì§€ ì•Šê³  ë¬¸ìžì—´ ê·¸ëŒ€ë¡œ URLì— í¬í•¨ë˜ì–´ ìž˜ëª»ëœ ê²½ë¡œë¡œ ìš”ì²­ë¨.

### ðŸ’¡ í•´ê²° (Solution)
- URL ì„ ì–¸ë¶€ë¥¼ ìž‘ì€ë”°ì˜´í‘œ(`'`)ì—ì„œ ë°±í‹±(`` ` ``)ìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ ë³€ìˆ˜ ì¸í„°í´ë ˆì´ì…˜(Interpolation)ì´ ì •ìƒ ìž‘ë™í•˜ë„ë¡ ì¡°ì¹˜.



## 9.íŠ¸ëŸ¬ë¸”ìŠˆíŒ…: Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ í™˜ê²½ì—ì„œ ì†Œì…œ ë¡œê·¸ì¸ ì—°ë™ ì´ìŠˆ

## ðŸ“Œ ë°°ê²½
ë°±ì—”ë“œ API ê²½ë¡œë¥¼ `/api`ë¡œ í†µì¼í•˜ëŠ” ë¦¬íŒ©í† ë§ ì§„í–‰ í›„, Nginxë¥¼ í†µí•´ ë°°í¬ëœ í™˜ê²½ì—ì„œ OAuth2 ì†Œì…œ ë¡œê·¸ì¸(ë„¤ì´ë²„/êµ¬ê¸€) ì‹œ **502 Bad Gateway** ë° **401/404 ì—ëŸ¬**ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ì‹ë³„ë¨.

## ðŸ” ë¬¸ì œ ìƒí™© ë° ì›ì¸ ë¶„ì„

### 1. 502 Bad Gateway (ì„œë²„ ê¸°ë™ ì‹¤íŒ¨)
- **ì¦ìƒ**: ë°°í¬ ì„œë²„ì—ì„œ `/api` ê²½ë¡œ í˜¸ì¶œ ì‹œ Nginxê°€ 502 ì—ëŸ¬ë¥¼ ë°˜í™˜.
- **ì›ì¸**: `docker logs` í™•ì¸ ê²°ê³¼, `SGIS_CLIENT_KEY` ë° ì†Œì…œ ë¡œê·¸ì¸ ê´€ë ¨ **í™˜ê²½ ë³€ìˆ˜(.env)ê°€ ëˆ„ë½**ë˜ì–´ Spring Boot ì»¨í…Œì´ë„ˆê°€ ì‹œìž‘ ë„ì¤‘ ì¢…ë£Œ(Crash)ë¨.
- **í•´ê²°**: ë°°í¬ ì„œë²„ `.env` íŒŒì¼ì— ëˆ„ë½ëœ í•„ìˆ˜ í‚¤ ê°’ì„ ì£¼ìž…í•˜ê³  ì»¨í…Œì´ë„ˆ ìž¬ìƒì„±.

### 2. ë„¤ì´ë²„ ë¡œê·¸ì¸ ì‹œ 404 Not Found (API ì—†ìŒ)
- **ì¦ìƒ**: ë¡œê·¸ì¸ ì‹œë„ ì‹œ ë„¤ì´ë²„ íŽ˜ì´ì§€ì—ì„œ "API ìš”ì²­ URL ì˜¤ë¥˜" ë°œìƒ.
- **ì›ì¸**:
    1. Spring Securityê°€ ë„¤ì´ë²„ë¡œ ë³´ë‚¸ `redirect_uri`ëŠ” `localhost`ì˜€ìœ¼ë‚˜, ë„¤ì´ë²„ ê°œë°œìž ì„¼í„°ì—ëŠ” `ì„œë²„ IP`ë§Œ ë“±ë¡ë˜ì–´ ìžˆì–´ **ì£¼ì†Œ ë¶ˆì¼ì¹˜** ë°œìƒ.
    2. ë°°í¬ í™˜ê²½ì—ì„œ í¬íŠ¸ í¬ì›Œë”©(80 -> 8080)ì„ ì‚¬ìš©í•¨ì—ë„ URLì— `:8080` í¬íŠ¸ê°€ í¬í•¨ë¨.
- **í•´ê²°**: ì„œë²„ í™˜ê²½ ë³€ìˆ˜ `NAVER_REDIRECT_URI`ë¥¼ `http://ì„œë²„IP/api/...` í˜•ì‹ìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ ë„¤ì´ë²„ ë“±ë¡ ì •ë³´ì™€ ì¼ì¹˜ì‹œí‚´.

### 3. ë¡œê·¸ì¸ ì‹œë„ ì‹œ 401 Unauthorized (ê²½ë¡œ ì´íƒˆ)
- **ì¦ìƒ**: `/api/oauth2/authorization/naver` í˜¸ì¶œ ì‹œ ë¡œê·¸ì¸ íŽ˜ì´ì§€ë¡œ ì´ë™í•˜ì§€ ì•Šê³  401 ì—ëŸ¬ ë°œìƒ.
- **ì›ì¸**: Spring Security OAuth2ì˜ ê¸°ë³¸ ì„¤ì •ì€ `/oauth2/...` ê²½ë¡œë§Œ ê°ì§€í•¨. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `/api`ë¥¼ ë¶™ì—¬ì„œ ìš”ì²­í–ˆìœ¼ë‚˜, ë°±ì—”ë“œ ì„¤ì •(`baseUri`)ì´ ì´ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•´ **ì¸ì¦ í•„í„°ë¥¼ ê±°ì¹˜ì§€ ëª»í•¨.**

## ðŸ’¡ ìµœì¢… í•´ê²° (SecurityConfig ìˆ˜ì •)
Spring Securityì—ê²Œ **"/api ë¡œ ì‹œìž‘í•˜ëŠ” ìš”ì²­ë„ OAuth2 ë¡œê·¸ì¸ ì²˜ë¦¬ ëŒ€ìƒì´ë‹¤"**ë¼ê³  ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•¨.

```java
.oauth2Login(oauth2 -> oauth2
    // 1. ë¡œê·¸ì¸ ì‹œìž‘ ê²½ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§• (/api ì¶”ê°€)
    .authorizationEndpoint(auth -> auth
        .baseUri("/api/oauth2/authorization")
    )
    // 2. ì¸ì¦ ì½”ë“œ ì½œë°±(Redirect) ê²½ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§• (/api ì¶”ê°€)
    .redirectionEndpoint(redirect -> redirect
        .baseUri("/api/login/oauth2/code/*")
    )
    // ... ê¸°ì¡´ í•¸ë“¤ëŸ¬ ì„¤ì •
)
